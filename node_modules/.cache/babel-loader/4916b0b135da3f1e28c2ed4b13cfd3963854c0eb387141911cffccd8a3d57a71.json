{"ast":null,"code":"import React,{useRef,useState,useEffect}from\"react\";import{Canvas}from\"@react-three/fiber\";import{useGLTF,Stage,PresentationControls}from\"@react-three/drei\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Model(props){const{scene}=useGLTF(\"/Porsche.glb\");// Traverse through all children of the scene and disable shadows\nscene.traverse(child=>{if(child.isMesh){child.castShadow=false;child.receiveShadow=false;if(child.material){child.material.castShadow=false;child.material.receiveShadow=false;}}});return/*#__PURE__*/_jsx(\"primitive\",{object:scene,...props});}function Porsche3d(){const carRef=useRef();const[rotationEnabled,setRotationEnabled]=useState(true);const[rotation,setRotation]=useState([0,Math.PI/4.,0]);let idleTimeout;const resetIdleTimer=()=>{clearTimeout(idleTimeout);idleTimeout=setTimeout(()=>{setRotationEnabled(true);},5000);};useEffect(()=>{let requestId;let lastTimestamp=0;const updateRotation=timestamp=>{const elapsedMilliseconds=timestamp-lastTimestamp;if(rotationEnabled){const rotationSpeed=0.0001;// Adjust rotation speed as needed\nsetRotation(prevRotation=>[prevRotation[0],prevRotation[1]+rotationSpeed*elapsedMilliseconds,prevRotation[2]]);}lastTimestamp=timestamp;requestId=requestAnimationFrame(updateRotation);};if(rotationEnabled){requestId=requestAnimationFrame(updateRotation);}// Initial idle timer setup\nresetIdleTimer();return()=>{cancelAnimationFrame(requestId);clearTimeout(idleTimeout);};},[rotationEnabled]);return/*#__PURE__*/_jsxs(Canvas,{dpr:[1,2],shadows:true,camera:{fov:45},style:{position:\"absolute\"},children:[/*#__PURE__*/_jsx(\"ambientLight\",{intensity:0.5}),/*#__PURE__*/_jsx(PresentationControls,{speed:1.5,global:true,zoom:1,polar:[-0.1,Math.PI/4.],onPointerDown:()=>{setRotationEnabled(true);resetIdleTimer();},onPointerUp:()=>{setRotationEnabled(false);},onPointerLeave:()=>{setRotationEnabled(false);},children:/*#__PURE__*/_jsx(Stage,{environment:\"\",children:/*#__PURE__*/_jsx(Model,{scale:0.0006,ref:carRef,rotation:rotation})})})]});}export default Porsche3d;","map":{"version":3,"names":["React","useRef","useState","useEffect","Canvas","useGLTF","Stage","PresentationControls","jsx","_jsx","jsxs","_jsxs","Model","props","scene","traverse","child","isMesh","castShadow","receiveShadow","material","object","Porsche3d","carRef","rotationEnabled","setRotationEnabled","rotation","setRotation","Math","PI","idleTimeout","resetIdleTimer","clearTimeout","setTimeout","requestId","lastTimestamp","updateRotation","timestamp","elapsedMilliseconds","rotationSpeed","prevRotation","requestAnimationFrame","cancelAnimationFrame","dpr","shadows","camera","fov","style","position","children","intensity","speed","global","zoom","polar","onPointerDown","onPointerUp","onPointerLeave","environment","scale","ref"],"sources":["/Users/omer/Local Repo/notomer.github.io/src/Components/Porsche3d.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { useGLTF, Stage, PresentationControls } from \"@react-three/drei\";\n\n\nfunction Model(props) {\n  const { scene } = useGLTF(\"/Porsche.glb\");\n\n  // Traverse through all children of the scene and disable shadows\n  scene.traverse((child) => {\n    if (child.isMesh) {\n      child.castShadow = false;\n      child.receiveShadow = false;\n      if (child.material) {\n        child.material.castShadow = false;\n        child.material.receiveShadow = false;\n      }\n    }\n  });\n\n  return <primitive object={scene} {...props} />;\n}\n\nfunction Porsche3d() {\n  const carRef = useRef();\n  const [rotationEnabled, setRotationEnabled] = useState(true);\n  const [rotation, setRotation] = useState([0, Math.PI / 4., 0]);\n\n  let idleTimeout;\n\n  const resetIdleTimer = () => {\n    clearTimeout(idleTimeout);\n    idleTimeout = setTimeout(() => {\n      setRotationEnabled(true);\n    }, 5000);\n  };\n\n  useEffect(() => {\n    let requestId;\n    let lastTimestamp = 0;\n\n    const updateRotation = (timestamp) => {\n      const elapsedMilliseconds = timestamp - lastTimestamp;\n\n      if (rotationEnabled) {\n        const rotationSpeed = 0.0001; // Adjust rotation speed as needed\n        setRotation((prevRotation) => [\n          prevRotation[0],\n          prevRotation[1] + rotationSpeed * elapsedMilliseconds,\n          prevRotation[2]\n        ]);\n      }\n\n      lastTimestamp = timestamp;\n      requestId = requestAnimationFrame(updateRotation);\n    };\n\n    if (rotationEnabled) {\n      requestId = requestAnimationFrame(updateRotation);\n    }\n\n    // Initial idle timer setup\n    resetIdleTimer();\n\n    return () => {\n      cancelAnimationFrame(requestId);\n      clearTimeout(idleTimeout);\n    };\n  }, [rotationEnabled]);\n\n  return (\n    <Canvas\n      dpr={[1, 2]}\n      shadows\n      camera={{ fov: 45 }}\n      style={{ position: \"absolute\" }}\n    >\n      <ambientLight intensity={0.5} />\n      <PresentationControls\n        speed={1.5}\n        global\n        zoom={1}\n        polar={[-0.1, Math.PI / 4.]}\n        onPointerDown={() => {\n          setRotationEnabled(true);\n          resetIdleTimer();\n        }}\n        onPointerUp={() => {\n          setRotationEnabled(false);\n        }}\n        onPointerLeave={() => {\n          setRotationEnabled(false);\n        }}\n      >\n        <Stage environment=\"\">\n          <Model scale={0.0006} ref={carRef} rotation={rotation} />\n        </Stage>\n      </PresentationControls>\n    </Canvas>\n  );\n}\n\nexport default Porsche3d;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}